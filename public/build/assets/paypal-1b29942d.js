import"./bootstrap-51eff01f.js";function s(){return $("#checkout-form").serializeArray().reduce((a,e)=>(a[e.name]=e.value,a),{})}function i(){const a=s();return Object.values(a).some(e=>e.length<1)}paypal.Buttons({onInit:function(a,e){e.disable(),$("#checkout-form").change(()=>{i()||e.enable()})},onClick:function(a,e){if(i()){alert("Please fill the form");return}},style:{color:"blue",shape:"pill",label:"pay",height:40},createOrder:function(a,e){return axios.post("/ajax/paypal/order/create/",s()).then(function(r){return r.data.vendor_order_id})},onApprove:function(a,e){return console.log("data",a),axios.post(`/ajax/paypal/order/${a.orderID}/capture/`).then(function(r){iziToast.success({title:"Payment process was completed",position:"topRight",onClosing:()=>{window.location.href=`/orders/${r.data.id}/paypal/thank-you`}})}).catch(r=>{var t=Array.isArray(res.data.data.details)&&res.data.details[0];if(t&&t.issue==="INSTRUMENT_DECLINED")return e.restart();if(t){var n="Sorry, your transaction could not be processed.";return t.description&&(n+=`

`+t.description),res.data.debug_id&&(n+=" ("+res.data.debug_id+")"),alert(n)}console.log("Capture result",res.data,JSON.stringify(res.data,null,2));var o=res.data.purchase_units[0].payments.captures[0];alert("Transaction "+o.status+": "+o.id+`

See console for all available details`)})}}).render("#paypal-button-container");
